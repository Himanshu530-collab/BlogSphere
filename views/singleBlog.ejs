<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/head') %>
    <title><%= blog.title %></title>
</head>
<body>
    <!-- Conditionally render nav bar only if this is not a single blog page -->
    <% if (!isSingleBlogPage) { %>
        <%- include('./partials/nav') %>
    <% } %>

    <div class="container mt-4">
        <h1><%= blog.title %></h1>
        <p><%= blog.body %></p>

        <% if (blog.coverImageURL) { %>
            <!-- Display the resized image for homepage view -->
            <img src="<%= blog.coverImageURL %>" alt="Cover Image" class="img-fluid" />
        <% } else if (blog.originalImageURL) { %>
            <!-- If there's no cover image, display the original image -->
            <img src="<%= blog.originalImageURL %>" alt="Original Cover Image" class="img-fluid" />
        <% } else { %>
            <p>No cover image available.</p>
        <% } %>

        <p><strong>Written by:</strong> <%= blog.createdBy.email %></p>

        <!-- Conditionally display Edit and Delete links only for the blog creator -->
        <% if (user && blog.createdBy._id.toString() === user._id.toString()) { %>
            <!-- Edit and Delete links, only visible to the blog creator -->
            <a href="/blog/edit/<%= blog._id %>" class="btn btn-warning">Edit Blog</a>
            <form action="/blog/delete/<%= blog._id %>" method="POST" style="display:inline;">
                <button type="submit" class="btn btn-danger">Delete Blog</button>
            </form>
        <% } %>

        <!-- Back to Home button -->
        <a href="/" class="btn btn-primary">Back to Home</a>
    </div>

    <%- include('./partials/scripts') %>
</body>
</html>
